<% local csc = premake.csc %>
# <%= premake.actions[_ACTION].shortname %> project makefile autogenerated by Premake

ifndef CONFIG
  CONFIG=<%= _MAKE.esc(this.configurations[1]) %>
endif

ifndef CSC
  CSC=<%= csc.getcompilervar(this) %>
endif

ifndef RESGEN
  RESGEN=resgen
endif


<% for cfg in premake.eachconfig(this) do %>
ifeq ($(CONFIG),<%= _MAKE.esc(cfg.name)%>)
  TARGETDIR   = <%= _MAKE.esc(cfg.buildtarget.directory) %>
  OBJDIR      = <%= _MAKE.esc(cfg.objectsdir) %>
  FLAGS      += <%= table.concat(csc.getflags(cfg), " ") %> <%= table.implode(cfg.defines, "/d:", "", " ") %>
  <% local siblings = _MAKE.esc(premake.getlinks(cfg, "siblings", "fullpath")) %>
  REFERENCES += <%= table.implode(siblings, "/r:", "", " ") %>
  DEPENDS    += <%= table.concat(siblings, " ") %>
endif

<% end %>

TARGET      = $(TARGETDIR)/<%= _MAKE.esc(this.buildtarget.name) %>
<% if #this.libdirs > 0 then %>
FLAGS      += <%= table.implode(_MAKE.esc(this.libdirs), "/lib:", "", " ") %>
<% end %>
REFERENCES += <%= table.implode(_MAKE.esc(premake.getlinks(this, "system", "basename")), '/r:', '', ' ') %>
